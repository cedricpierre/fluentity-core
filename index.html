<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@fluentity/core</title><meta name="description" content="Documentation for @fluentity/core"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">@fluentity/core</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@fluentity/core</h1></div><div class="tsd-panel tsd-typography"><p><img src="https://codecov.io/gh/cedricpierre/fluentity-core/core/branch/main/graph/badge.svg" alt="Coverage">
<img src="https://img.shields.io/npm/v/@fluentity/core" alt="npm">
<img src="https://github.com/cedricpierre/fluentity-core/actions/workflows/ci.yml/badge.svg" alt="CI">
<img src="https://img.shields.io/badge/typed-TypeScript-blue.svg" alt="TypeScript">
<img src="https://img.shields.io/badge/tree--shakable-yes-brightgreen" alt="tree-shakable">
<img src="https://img.shields.io/badge/tests-100%25-brightgreen" alt="Tests"></p>
<h1 id="fluentity" class="tsd-anchor-link">Fluentity<a href="#fluentity" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Fluentity is a lightweight and flexible library for TypeScript/JavaScript applications to consume RESTFul API using models. It's inspired by Active Record and Laravel Eloquent. It provides a simple and intuitive way to interact with your API endpoints while maintaining type safety and following object-oriented principles. Fluentity has also a small caching mechinism.</p>
<h2 id="quality--reliability" class="tsd-anchor-link">Quality &amp; Reliability<a href="#quality--reliability" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>üíØ Written in TypeScript</li>
<li>üß™ 99% test coverage with Vitest</li>
<li>‚ö°Ô∏è Designed for fast, type-safe API interactions</li>
</ul>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@fluentity/core</span>
</code><button type="button">Copy</button></pre>

<p>Run tests</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">test</span>
</code><button type="button">Copy</button></pre>

<h2 id="configuration" class="tsd-anchor-link">Configuration<a href="#configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>In JavaScript, property decorators are not natively supported yet (as of 2025), but they can be enabled using transpilers like Babel or TypeScript with experimental support.</p>
<p>Here's how to enable and use them in TypeScript, which has the best support for decorators:</p>
<h3 id="typescript" class="tsd-anchor-link">Typescript<a href="#typescript" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>In your <code>tsconfig.json</code></p>
<pre><code class="typescript"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;compilerOptions&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;target&quot;</span><span class="hl-3">:</span><span class="hl-1"> </span><span class="hl-2">&quot;ESNext&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;experimentalDecorators&quot;</span><span class="hl-3">:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">&quot;useDefineForClassFields&quot;</span><span class="hl-3">:</span><span class="hl-1"> </span><span class="hl-4">false</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="if-you-are-using-babel" class="tsd-anchor-link">If you are using Babel<a href="#if-you-are-using-babel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-5">&quot;plugins&quot;</span><span class="hl-1">: [</span><br/><span class="hl-1">    [</span><span class="hl-2">&quot;@babel/plugin-proposal-decorators&quot;</span><span class="hl-1">, { </span><span class="hl-5">&quot;version&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;legacy&quot;</span><span class="hl-1"> }],</span><br/><span class="hl-1">    [</span><span class="hl-2">&quot;@babel/plugin-proposal-class-properties&quot;</span><span class="hl-1">, { </span><span class="hl-5">&quot;loose&quot;</span><span class="hl-1">: </span><span class="hl-4">true</span><span class="hl-1"> }]</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>After you need to initialize Fluentity with an adapter:</p>
<pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-3">Fluentity</span><span class="hl-1">, </span><span class="hl-3">RestAdapter</span><span class="hl-1">, </span><span class="hl-3">RestAdapterOptions</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@fluentity/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * Configuration options for initializing Fluentity</span><br/><span class="hl-7"> */</span><br/><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-8">FluentityConfig</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">/** The adapter to use for making API requests */</span><br/><span class="hl-1">  </span><span class="hl-3">adapter</span><span class="hl-1">: </span><span class="hl-8">RestAdapter</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * Initialize Fluentity with the given configuration</span><br/><span class="hl-7"> * </span><span class="hl-4">@param</span><span class="hl-7"> </span><span class="hl-3">config</span><span class="hl-7"> - The configuration options</span><br/><span class="hl-7"> * </span><span class="hl-4">@returns</span><span class="hl-7"> The Fluentity instance</span><br/><span class="hl-7"> */</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">fluentity</span><span class="hl-1"> = </span><span class="hl-3">Fluentity</span><span class="hl-1">.</span><span class="hl-0">initialize</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-3">adapter:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">RestAdapter</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-3">baseUrl:</span><span class="hl-1"> </span><span class="hl-2">&#39;https://api.example.com&#39;</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h2 id="adapters" class="tsd-anchor-link">Adapters<a href="#adapters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Currently, Fluentity supports only one adapter: RestAdapter. This allows you to make Restful API calls using the models. In the future we are planning to add more adapters like GraphQL.</p>
<pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-3">RestAdapter</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@fluentity/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">adapter</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">RestAdapter</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-3">baseUrl:</span><span class="hl-1"> </span><span class="hl-2">&#39;https://api.example.com&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<h2 id="creating-models" class="tsd-anchor-link">Creating Models<a href="#creating-models" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Models are the core of Fluentity. Here's how to create a model:</p>
<pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-3">Model</span><span class="hl-1">, </span><span class="hl-3">Attributes</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@fluentity/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * Interface defining the attributes for a User model</span><br/><span class="hl-7"> * </span><span class="hl-4">@interface</span><span class="hl-7"> </span><span class="hl-8">UserAttributes</span><br/><span class="hl-7"> * </span><span class="hl-4">@extends</span><span class="hl-7"> </span><span class="hl-8">{Attributes}</span><br/><span class="hl-7"> */</span><br/><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-8">UserAttributes</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-8">Attributes</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">/** The user&#39;s full name */</span><br/><span class="hl-1">  </span><span class="hl-3">name</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** The user&#39;s email address */</span><br/><span class="hl-1">  </span><span class="hl-3">email</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Optional phone number */</span><br/><span class="hl-1">  </span><span class="hl-3">phone</span><span class="hl-1">?: </span><span class="hl-8">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-7">/** Optional associated company */</span><br/><span class="hl-1">  </span><span class="hl-3">company</span><span class="hl-1">?: </span><span class="hl-8">Company</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * User model class for interacting with the users API endpoint</span><br/><span class="hl-7"> * </span><span class="hl-4">@class</span><span class="hl-7"> User</span><br/><span class="hl-7"> * </span><span class="hl-4">@extends</span><span class="hl-7"> </span><span class="hl-8">{Model&lt;UserAttributes&gt;}</span><br/><span class="hl-7"> */</span><br/><span class="hl-6">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">User</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-8">Model</span><span class="hl-1">&lt;</span><span class="hl-8">UserAttributes</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-7">/** The API endpoint resource name for this model */</span><br/><span class="hl-1">  </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-3">resource</span><span class="hl-1"> = </span><span class="hl-2">&#39;users&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="using-the-official-cli-tool-" class="tsd-anchor-link">Using the official CLI tool :<a href="#using-the-official-cli-tool-" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Have a look at this package to generate complete models: <a href="https://github.com/cedricpierre/fluentity-cli">Fluentity CLI</a></p>
<h2 id="model-methods" class="tsd-anchor-link">Model Methods<a href="#model-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="static-methods" class="tsd-anchor-link">Static Methods<a href="#static-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Models come with several static methods for querying and manipulating data:</p>
<pre><code class="typescript"><span class="hl-7">/**</span><br/><span class="hl-7"> * Get all records from the API</span><br/><span class="hl-7"> * </span><span class="hl-4">@returns</span><span class="hl-7"> Promise resolving to an array of model instances</span><br/><span class="hl-7"> */</span><br/><span class="hl-3">Model</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">(): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-3">Model</span><span class="hl-1">[]&gt;</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * Find a record by ID</span><br/><span class="hl-7"> * </span><span class="hl-4">@param</span><span class="hl-7"> </span><span class="hl-3">id</span><span class="hl-7"> - The ID of the record to find</span><br/><span class="hl-7"> * </span><span class="hl-4">@returns</span><span class="hl-7"> Promise resolving to a model instance</span><br/><span class="hl-7"> */</span><br/><span class="hl-3">Model</span><span class="hl-1">.</span><span class="hl-0">find</span><span class="hl-1">(</span><span class="hl-3">id</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> | </span><span class="hl-3">number</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-3">Model</span><span class="hl-1">&gt;</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * Start a query for a specific ID</span><br/><span class="hl-7"> * </span><span class="hl-4">@param</span><span class="hl-7"> </span><span class="hl-3">id</span><span class="hl-7"> - The ID to query</span><br/><span class="hl-7"> * </span><span class="hl-4">@returns</span><span class="hl-7"> A query builder instance</span><br/><span class="hl-7"> */</span><br/><span class="hl-3">Model</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">(</span><span class="hl-3">id</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> | </span><span class="hl-3">number</span><span class="hl-1">): </span><span class="hl-3">QueryBuilder</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * Create a new record</span><br/><span class="hl-7"> * </span><span class="hl-4">@param</span><span class="hl-7"> </span><span class="hl-3">data</span><span class="hl-7"> - The data to create the record with</span><br/><span class="hl-7"> * </span><span class="hl-4">@returns</span><span class="hl-7"> Promise resolving to the created model instance</span><br/><span class="hl-7"> */</span><br/><span class="hl-3">Model</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">(</span><span class="hl-3">data</span><span class="hl-1">: </span><span class="hl-3">Partial</span><span class="hl-1">&lt;</span><span class="hl-3">Attributes</span><span class="hl-1">&gt;): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-3">Model</span><span class="hl-1">&gt;</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * Update a record</span><br/><span class="hl-7"> * </span><span class="hl-4">@param</span><span class="hl-7"> </span><span class="hl-3">id</span><span class="hl-7"> - The ID of the record to update</span><br/><span class="hl-7"> * </span><span class="hl-4">@param</span><span class="hl-7"> </span><span class="hl-3">data</span><span class="hl-7"> - The data to update the record with</span><br/><span class="hl-7"> * </span><span class="hl-4">@returns</span><span class="hl-7"> Promise resolving to the updated model instance</span><br/><span class="hl-7"> */</span><br/><span class="hl-3">Model</span><span class="hl-1">.</span><span class="hl-0">update</span><span class="hl-1">(</span><span class="hl-3">id</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> | </span><span class="hl-3">number</span><span class="hl-1">, </span><span class="hl-3">data</span><span class="hl-1">: </span><span class="hl-3">Partial</span><span class="hl-1">&lt;</span><span class="hl-3">Attributes</span><span class="hl-1">&gt;): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-3">Model</span><span class="hl-1">&gt;</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * Delete a record</span><br/><span class="hl-7"> * </span><span class="hl-4">@param</span><span class="hl-7"> </span><span class="hl-3">id</span><span class="hl-7"> - The ID of the record to delete</span><br/><span class="hl-7"> * </span><span class="hl-4">@returns</span><span class="hl-7"> Promise that resolves when the deletion is complete</span><br/><span class="hl-7"> */</span><br/><span class="hl-3">Model</span><span class="hl-1">.</span><span class="hl-0">delete</span><span class="hl-1">(</span><span class="hl-3">id</span><span class="hl-1">: </span><span class="hl-3">string</span><span class="hl-1"> | </span><span class="hl-3">number</span><span class="hl-1">): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<h3 id="instance-methods" class="tsd-anchor-link">Instance Methods<a href="#instance-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">/**</span><br/><span class="hl-7"> * Save the instance (create or update)</span><br/><span class="hl-7"> * </span><span class="hl-4">@returns</span><span class="hl-7"> Promise resolving to the saved model instance</span><br/><span class="hl-7"> */</span><br/><span class="hl-3">model</span><span class="hl-1">.</span><span class="hl-0">save</span><span class="hl-1">(): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-3">Model</span><span class="hl-1">&gt;</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * Update the instance with new data</span><br/><span class="hl-7"> * </span><span class="hl-4">@param</span><span class="hl-7"> </span><span class="hl-3">data</span><span class="hl-7"> - The data to update the instance with</span><br/><span class="hl-7"> * </span><span class="hl-4">@returns</span><span class="hl-7"> Promise resolving to the updated model instance</span><br/><span class="hl-7"> */</span><br/><span class="hl-3">model</span><span class="hl-1">.</span><span class="hl-0">update</span><span class="hl-1">(</span><span class="hl-3">data</span><span class="hl-1">: </span><span class="hl-3">Partial</span><span class="hl-1">&lt;</span><span class="hl-3">Attributes</span><span class="hl-1">&gt;): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-3">Model</span><span class="hl-1">&gt;</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * Delete the instance</span><br/><span class="hl-7"> * </span><span class="hl-4">@returns</span><span class="hl-7"> Promise that resolves when the deletion is complete</span><br/><span class="hl-7"> */</span><br/><span class="hl-3">model</span><span class="hl-1">.</span><span class="hl-0">delete</span><span class="hl-1">(): </span><span class="hl-8">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<h3 id="relation-methods" class="tsd-anchor-link">Relation Methods<a href="#relation-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Example usage:</p>
<pre><code class="typescript"><span class="hl-7">// Working with relations</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">post</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-3">Post</span><span class="hl-1">.</span><span class="hl-0">find</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">comments</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-3">post</span><span class="hl-1">.</span><span class="hl-3">comments</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">();</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">comment</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-3">post</span><span class="hl-1">.</span><span class="hl-3">comments</span><span class="hl-1">.</span><span class="hl-0">create</span><span class="hl-1">({ </span><br/><span class="hl-1">    </span><span class="hl-3">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;John&#39;</span><span class="hl-1">, </span><br/><span class="hl-1">    </span><span class="hl-3">email:</span><span class="hl-1"> </span><span class="hl-2">&#39;john@example.com&#39;</span><span class="hl-1"> </span><br/><span class="hl-1">});</span><br/><br/><span class="hl-7">// Using pagination</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">comments</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-3">post</span><span class="hl-1">.</span><span class="hl-3">comments</span><span class="hl-1">.</span><span class="hl-0">limit</span><span class="hl-1">(</span><span class="hl-10">10</span><span class="hl-1">).</span><span class="hl-0">offset</span><span class="hl-1">(</span><span class="hl-10">10</span><span class="hl-1">).</span><span class="hl-0">all</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h2 id="caching" class="tsd-anchor-link">Caching<a href="#caching" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Fluentity provides a simple caching mechanism that can be configured through the adapter:</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">fluentity</span><span class="hl-1"> = </span><span class="hl-3">Fluentity</span><span class="hl-1">.</span><span class="hl-0">initialize</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-3">adapter:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">RestAdapter</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-3">baseUrl:</span><span class="hl-1"> </span><span class="hl-2">&#39;https://api.example.com&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">cacheOptions:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-3">enabled:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-3">ttl:</span><span class="hl-1"> </span><span class="hl-10">1000</span><span class="hl-1"> </span><span class="hl-7">// Time to live in milliseconds</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-7">// Clear cache for a specific endpoint</span><br/><span class="hl-3">fluentity</span><span class="hl-1">.</span><span class="hl-3">adapter</span><span class="hl-1">.</span><span class="hl-0">deleteCache</span><span class="hl-1">(</span><span class="hl-2">&quot;users/1&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-7">// Get cache for a specific endpoint</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">cache</span><span class="hl-1"> = </span><span class="hl-3">fluentity</span><span class="hl-1">.</span><span class="hl-3">adapter</span><span class="hl-1">.</span><span class="hl-0">getCache</span><span class="hl-1">(</span><span class="hl-2">&quot;users/1&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="query-builder" class="tsd-anchor-link">Query builder<a href="#query-builder" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The QueryBuilder class is used under the hood the create the queries. It can be used by any Adapter. The query builder can also be instantiated in a Model and make queries using <code>Model.call(queryBuilder)</code>.</p>
<h3 id="nesting-query-builer" class="tsd-anchor-link">Nesting query builer<a href="#nesting-query-builer" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>This is the core of Fluentity, you can nest different query builders and the adapter will manage that. That's how relations are built:</p>
<pre><code class="typescript"><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">queryBuilder</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">QueryBuilder</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-3">resource:</span><span class="hl-1"> </span><span class="hl-2">&#39;medias&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">id:</span><span class="hl-1"> </span><span class="hl-10">2</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">parent:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">QueryBuilder</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-3">resource:</span><span class="hl-1"> </span><span class="hl-2">&#39;users&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">id:</span><span class="hl-1"> </span><span class="hl-10">1</span><br/><span class="hl-1">      })</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-3">Fluentity</span><span class="hl-1">.</span><span class="hl-3">adapter</span><span class="hl-1">.</span><span class="hl-0">call</span><span class="hl-1">(</span><span class="hl-3">queryBuilder</span><span class="hl-1">); </span><span class="hl-7">// Will create a Get /users/1/medias/2</span>
</code><button type="button">Copy</button></pre>

<p>That's what Models decorators are doing under the hood.</p>
<h2 id="decorators" class="tsd-anchor-link">Decorators<a href="#decorators" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Fluentity provides several decorators to define relationships and type casting:</p>
<h3 id="relationship-decorators" class="tsd-anchor-link">Relationship Decorators<a href="#relationship-decorators" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-3">HasOne</span><span class="hl-1">, </span><span class="hl-3">HasMany</span><span class="hl-1">, </span><span class="hl-3">BelongsTo</span><span class="hl-1">, </span><span class="hl-3">BelongsToMany</span><span class="hl-1">, </span><span class="hl-3">Relation</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@fluentity/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * User model with relationship decorators</span><br/><span class="hl-7"> * </span><span class="hl-4">@class</span><span class="hl-7"> User</span><br/><span class="hl-7"> * </span><span class="hl-4">@extends</span><span class="hl-7"> </span><span class="hl-8">{Model&lt;UserAttributes&gt;}</span><br/><span class="hl-7"> */</span><br/><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">User</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-8">Model</span><span class="hl-1">&lt;</span><span class="hl-8">UserAttributes</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-7">/** One-to-one relationship with Profile model */</span><br/><span class="hl-1">  @</span><span class="hl-0">HasOne</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-3">Profile</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-3">profile</span><span class="hl-1">!: </span><span class="hl-8">Relation</span><span class="hl-1">&lt;</span><span class="hl-8">Profile</span><span class="hl-1">&gt;;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">/** One-to-many relationship with Post model */</span><br/><span class="hl-1">  @</span><span class="hl-0">HasMany</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-3">Post</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-3">posts</span><span class="hl-1">!: </span><span class="hl-8">Relation</span><span class="hl-1">&lt;</span><span class="hl-8">Post</span><span class="hl-1">[]&gt;;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">/** One-to-many relationship with Media model using custom resource name */</span><br/><span class="hl-1">  @</span><span class="hl-0">HasMany</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-3">Media</span><span class="hl-1">, </span><span class="hl-2">&#39;libraries&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-3">medias</span><span class="hl-1">!: </span><span class="hl-8">Relation</span><span class="hl-1">&lt;</span><span class="hl-8">Media</span><span class="hl-1">[]&gt;;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">/** Many-to-many relationship with Role model */</span><br/><span class="hl-1">  @</span><span class="hl-0">BelongsToMany</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-3">Role</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-3">roles</span><span class="hl-1">!: </span><span class="hl-8">Relation</span><span class="hl-1">&lt;</span><span class="hl-8">Role</span><span class="hl-1">[]&gt;;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h3 id="type-casting" class="tsd-anchor-link">Type Casting<a href="#type-casting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-6">import</span><span class="hl-1"> { </span><span class="hl-3">Cast</span><span class="hl-1"> } </span><span class="hl-6">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@fluentity/core&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">/**</span><br/><span class="hl-7"> * User model with type casting decorators</span><br/><span class="hl-7"> * </span><span class="hl-4">@class</span><span class="hl-7"> User</span><br/><span class="hl-7"> * </span><span class="hl-4">@extends</span><span class="hl-7"> </span><span class="hl-8">{Model&lt;UserAttributes&gt;}</span><br/><span class="hl-7"> */</span><br/><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">User</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-8">Model</span><span class="hl-1">&lt;</span><span class="hl-8">UserAttributes</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-7">/** Cast created_at to Date type */</span><br/><span class="hl-1">  @</span><span class="hl-0">Cast</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-3">Date</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-3">created_at</span><span class="hl-1">?: </span><span class="hl-8">Date</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">/** Cast thumbnail to Thumbnail type */</span><br/><span class="hl-1">  @</span><span class="hl-0">Cast</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-3">Thumbnail</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-3">thumbnail</span><span class="hl-1">?: </span><span class="hl-8">Thumbnail</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-7">/** Cast thumbnails array to array of Thumbnail type */</span><br/><span class="hl-1">  @</span><span class="hl-0">Cast</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-3">Thumbnail</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-3">thumbnails</span><span class="hl-1">?: </span><span class="hl-8">Thumbnail</span><span class="hl-1">[];</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="scopes" class="tsd-anchor-link">Scopes<a href="#scopes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Scopes allow you to define reusable query constraints:</p>
<pre><code class="typescript"><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">User</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-8">Model</span><span class="hl-1">&lt;</span><span class="hl-8">UserAttributes</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-3">scopes</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-0">active</span><span class="hl-3">:</span><span class="hl-1"> (</span><span class="hl-3">query</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-3">query</span><span class="hl-1">.</span><span class="hl-0">where</span><span class="hl-1">({ </span><span class="hl-3">status:</span><span class="hl-1"> </span><span class="hl-2">&#39;active&#39;</span><span class="hl-1"> })</span><br/><span class="hl-1">  };</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="custom-methods" class="tsd-anchor-link">Custom methods<a href="#custom-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>You can also declare custom methods in the models.
The idea is to abstract the query using QueryBuilder, that way it's not dependant of the selected Adapter.</p>
<pre><code class="typescript"><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-8">User</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-8">Model</span><span class="hl-1">&lt;</span><span class="hl-8">UserAttributes</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-4">static</span><span class="hl-1"> </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-0">login</span><span class="hl-1">(</span><span class="hl-3">username</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">, </span><span class="hl-3">password</span><span class="hl-1">: </span><span class="hl-8">string</span><span class="hl-1">) {</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// The query builder will be used by the current adapter.</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">queryBuilder</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">QueryBuilder</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-3">resource:</span><span class="hl-1"> </span><span class="hl-2">&#39;login&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">body:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">username</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">password</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-3">method:</span><span class="hl-1"> </span><span class="hl-3">Methods</span><span class="hl-1">.</span><span class="hl-9">POST</span><span class="hl-1">,</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// Model has a static method &quot;call&quot; that uses the adapter.</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">response</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-0">call</span><span class="hl-1">(</span><span class="hl-3">queryBuilder</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// We are are to create a new instance of User</span><br/><span class="hl-1">    </span><span class="hl-6">return</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">(</span><span class="hl-3">response</span><span class="hl-1">.</span><span class="hl-3">data</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Usage:</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-3">User</span><span class="hl-1">.</span><span class="hl-0">login</span><span class="hl-1">(</span><span class="hl-3">username</span><span class="hl-1">, </span><span class="hl-3">password</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="static-methods-1" class="tsd-anchor-link">Static Methods<a href="#static-methods-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Models come with several static methods for querying and manipulating data:</p>
<ul>
<li><code>Model.all()</code>: Get all records</li>
<li><code>Model.find(id)</code>: Find a record by ID</li>
<li><code>Model.create(data)</code>: Create a new record</li>
<li><code>Model.update(id, data)</code>: Update a record</li>
<li><code>Model.delete(id)</code>: Delete a record</li>
</ul>
<h2 id="instance-methods-1" class="tsd-anchor-link">Instance methods<a href="#instance-methods-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><code>model.get()</code>: Fetch the instance using the id, if defined</li>
<li><code>model.id(id)</code>: Return a new instance with id.</li>
<li><code>model.update(data)</code>: Update the instance with data</li>
<li><code>model.delete()</code>: Delete the instance</li>
<li><code>model.save()</code>: Save the instance</li>
</ul>
<h2 id="relation-methods-1" class="tsd-anchor-link">Relation methods<a href="#relation-methods-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><code>query()</code>: Start a new query builder</li>
<li><code>where(conditions)</code>: Add where conditions</li>
<li><code>filter(filters)</code>: Add filter conditions</li>
</ul>
<p>Example usage:</p>
<pre><code class="typescript"><span class="hl-7">// Query with conditions</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">activeUsers</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-3">User</span><span class="hl-1">.</span><span class="hl-0">where</span><span class="hl-1">({ </span><span class="hl-3">status:</span><span class="hl-1"> </span><span class="hl-2">&#39;active&#39;</span><span class="hl-1"> }).</span><span class="hl-0">all</span><span class="hl-1">();</span><br/><br/><span class="hl-7">// Deep chaining</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">thumbails</span><span class="hl-1"> = </span><span class="hl-3">User</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">).</span><span class="hl-3">medias</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">(</span><span class="hl-10">2</span><span class="hl-1">).</span><span class="hl-3">thumnails</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">();</span><br/><span class="hl-7">// Will make a call to /users/1/medias/2/thumbails</span>
</code><button type="button">Copy</button></pre>

<h2 id="instance-methods-2" class="tsd-anchor-link">Instance Methods<a href="#instance-methods-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Model instances have the following methods:</p>
<ul>
<li><code>save()</code>: Create or update the record</li>
<li><code>update(data)</code>: Update the record</li>
<li><code>delete()</code>: Delete the record</li>
</ul>
<p>Example usage:</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-0">User</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;John Doe&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">email:</span><span class="hl-1"> </span><span class="hl-2">&#39;john@example.com&#39;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-7">// Save new user</span><br/><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-3">user</span><span class="hl-1">.</span><span class="hl-0">save</span><span class="hl-1">();</span><br/><br/><span class="hl-7">// Update user</span><br/><span class="hl-3">user</span><span class="hl-1">.</span><span class="hl-3">name</span><span class="hl-1"> = </span><span class="hl-2">&#39;Jane Doe&#39;</span><span class="hl-1">;</span><br/><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-3">user</span><span class="hl-1">.</span><span class="hl-0">update</span><span class="hl-1">({ </span><span class="hl-3">email:</span><span class="hl-1"> </span><span class="hl-2">&quot;test@example.com&quot;</span><span class="hl-1"> });</span><br/><br/><span class="hl-7">// Delete user</span><br/><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-3">user</span><span class="hl-1">.</span><span class="hl-0">delete</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h2 id="using-relations" class="tsd-anchor-link">Using relations<a href="#using-relations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>You can use the relations declared in the model to create API calls.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-3">User</span><span class="hl-1">.</span><span class="hl-0">find</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">)</span><br/><br/><span class="hl-7">// Will create an API call: GET /users/1/medias</span><br/><span class="hl-3">user</span><span class="hl-1">.</span><span class="hl-3">medias</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">()</span><br/><br/><span class="hl-7">// Will create an API call: GET /users/1/medias/2</span><br/><span class="hl-3">user</span><span class="hl-1">.</span><span class="hl-3">medias</span><span class="hl-1">.</span><span class="hl-0">find</span><span class="hl-1">(</span><span class="hl-10">2</span><span class="hl-1">)</span><br/><br/><span class="hl-7">// Will create an API call: GET /users/1/medias/2/thumbnails</span><br/><span class="hl-3">user</span><span class="hl-1">.</span><span class="hl-3">medias</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">(</span><span class="hl-10">2</span><span class="hl-1">).</span><span class="hl-3">thumbnails</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">()</span>
</code><button type="button">Copy</button></pre>

<h3 id="difference-between-id-and-find" class="tsd-anchor-link">Difference between id() and find()<a href="#difference-between-id-and-find" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-3">User</span><span class="hl-1">.</span><span class="hl-0">find</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">) </span><span class="hl-7">// Will make an API call to /users/1</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-3">User</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">) </span><span class="hl-7">// return an instance of a new User with id equals 1. Then this instance can be used to query relations.</span><br/><br/><span class="hl-3">user</span><span class="hl-1">.</span><span class="hl-3">medias</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">() </span><span class="hl-7">// Will create an API call: GET /users/1/medias</span>
</code><button type="button">Copy</button></pre>

<h2 id="additional-methods" class="tsd-anchor-link">Additional Methods<a href="#additional-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="toobject" class="tsd-anchor-link">toObject()<a href="#toobject" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>toObject()</code> method converts a model instance and its related models into a plain JavaScript object:</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-3">User</span><span class="hl-1">.</span><span class="hl-0">find</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">userObject</span><span class="hl-1"> = </span><span class="hl-3">user</span><span class="hl-1">.</span><span class="hl-0">toObject</span><span class="hl-1">();</span><br/><span class="hl-7">// Returns a plain object with all properties and nested related models</span>
</code><button type="button">Copy</button></pre>

<h2 id="error-handling" class="tsd-anchor-link">Error Handling<a href="#error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Fluentity includes comprehensive error handling for common scenarios:</p>
<ul>
<li>Missing required parameters (ID, data, where conditions)</li>
<li>Undefined resource names</li>
<li>API request failures</li>
<li>Invalid model operations</li>
</ul>
<p>Example error handling:</p>
<pre><code class="typescript"><span class="hl-6">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-9">user</span><span class="hl-1"> = </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-3">User</span><span class="hl-1">.</span><span class="hl-0">find</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-6">catch</span><span class="hl-1"> (</span><span class="hl-3">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-6">if</span><span class="hl-1"> (</span><span class="hl-3">error</span><span class="hl-1"> </span><span class="hl-4">instanceof</span><span class="hl-1"> </span><span class="hl-8">Error</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">`Failed to find user: </span><span class="hl-4">${</span><span class="hl-3">error</span><span class="hl-11">.</span><span class="hl-3">message</span><span class="hl-4">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">await</span><span class="hl-1"> </span><span class="hl-3">User</span><span class="hl-1">.</span><span class="hl-0">update</span><span class="hl-1">(</span><span class="hl-10">1</span><span class="hl-1">, { </span><span class="hl-3">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;John&#39;</span><span class="hl-1"> });</span><br/><span class="hl-1">} </span><span class="hl-6">catch</span><span class="hl-1"> (</span><span class="hl-3">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-6">if</span><span class="hl-1"> (</span><span class="hl-3">error</span><span class="hl-1"> </span><span class="hl-4">instanceof</span><span class="hl-1"> </span><span class="hl-8">Error</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">`Failed to update user: </span><span class="hl-4">${</span><span class="hl-3">error</span><span class="hl-11">.</span><span class="hl-3">message</span><span class="hl-4">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<h2 id="license" class="tsd-anchor-link">License<a href="#license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>MIT</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#fluentity"><span>Fluentity</span></a><ul><li><a href="#quality--reliability"><span>Quality &amp; <wbr/>Reliability</span></a></li><li><a href="#installation"><span>Installation</span></a></li><li><a href="#configuration"><span>Configuration</span></a></li><li><ul><li><a href="#typescript"><span>Typescript</span></a></li><li><a href="#if-you-are-using-babel"><span>If you are using <wbr/>Babel</span></a></li></ul></li><li><a href="#adapters"><span>Adapters</span></a></li><li><a href="#creating-models"><span>Creating <wbr/>Models</span></a></li><li><ul><li><a href="#using-the-official-cli-tool-"><span>Using the official <wbr/>CLI tool :</span></a></li></ul></li><li><a href="#model-methods"><span>Model <wbr/>Methods</span></a></li><li><ul><li><a href="#static-methods"><span>Static <wbr/>Methods</span></a></li><li><a href="#instance-methods"><span>Instance <wbr/>Methods</span></a></li><li><a href="#relation-methods"><span>Relation <wbr/>Methods</span></a></li></ul></li><li><a href="#caching"><span>Caching</span></a></li><li><a href="#query-builder"><span>Query builder</span></a></li><li><ul><li><a href="#nesting-query-builer"><span>Nesting query builer</span></a></li></ul></li><li><a href="#decorators"><span>Decorators</span></a></li><li><ul><li><a href="#relationship-decorators"><span>Relationship <wbr/>Decorators</span></a></li><li><a href="#type-casting"><span>Type <wbr/>Casting</span></a></li></ul></li><li><a href="#scopes"><span>Scopes</span></a></li><li><a href="#custom-methods"><span>Custom methods</span></a></li><li><a href="#static-methods-1"><span>Static <wbr/>Methods</span></a></li><li><a href="#instance-methods-1"><span>Instance methods</span></a></li><li><a href="#relation-methods-1"><span>Relation methods</span></a></li><li><a href="#instance-methods-2"><span>Instance <wbr/>Methods</span></a></li><li><a href="#using-relations"><span>Using relations</span></a></li><li><ul><li><a href="#difference-between-id-and-find"><span>Difference between id() and find()</span></a></li></ul></li><li><a href="#additional-methods"><span>Additional <wbr/>Methods</span></a></li><li><ul><li><a href="#toobject"><span>to<wbr/>Object()</span></a></li></ul></li><li><a href="#error-handling"><span>Error <wbr/>Handling</span></a></li><li><a href="#license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">@fluentity/core</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
